#!/usr/bin/env bash

source "$HOME"/benchy_imaged.sh

# Installs dependencies required for benchmarking Aztec (Noir with Barretenberg) ZK circuits.

# XXX: Currently this is only to whatever noirup and bbup gather, regression testing (prior major versions) and the like will be added when YSH rewrite is made.

# TODO: Ditto install_barretenberg's notice.
install_noir ()
{
    set +o nounset

    kurl 'https://raw.githubusercontent.com/noir-lang/noirup/main/install' \
        | bash

    # reload_shell
    source /home/"$USERNAME"/.bashrc

    noirup
}

# TODO: This is an Aztec problem mostly, but curling a shell script into Bash is.. not good. Deconstruct their desired installation strategy and keep it in-sync later.
install_barretenberg ()
{
    kurl 'https://raw.githubusercontent.com/AztecProtocol/aztec-packages/refs/heads/next/barretenberg/bbup/install' \
        | bash

    # # reload_shell
    source /home/"$USERNAME"/.bashrc

    bbup
}


install_noir
install_barretenberg
